.. raw:: html

   <!--

   ============================================================================

      DO NOT EDIT THIS FILE! It was generated using Sphinx from:

      Origin:   $URL: https://sbia-svn.uphs.upenn.edu/projects/AutoSkullStrip/tags/MASS_1.1.1/doc/about.rst $
      Revision: $Rev: 254 $

   ============================================================================

   -->

.. title:: About MASS Algorithm

.. meta::
   :description: Brief overview of the MASS algorithm.
   :keywords: MASS Algorithm.
 

.. raw:: latex

    \pagebreak


===================
About the Algorithm 
===================

A general overview of the proposed method is given in the following figure. 
The MASS framework consists of 3 components: template selection, registration and
label fusion.

.. _fig_framework:

  
    .. figure::   Figure1_OutlineOfMethod.jpg
       :alt:      Outline of the method. In the registration component (middle), binary brain
       		  masks registered to target space are shown in yellow; in the label fusion component (bot-
       		  tom) the fused brain mask is shown using a blue-red colormap, and the final binary brain
       		  mask is shown in yellow.
       :align:    center
       :width:    90%
       :figwidth: 90%


Template Selection
------------------

The quality of a registration is directly related to the similarity between
the template and the target images. Either due to differences between populations 
(e.g. age, disease, etc.) or changes in scanner type, technology and
protocol (e.g. 1.5T to 3T), images from two different projects might be significantly 
different. In order to increase the template-subject similarity, and
hence to improve the registration accuracy, we select a study-specific set of
templates using a clustering-based approach. The same set of templates is used 
for processing all images in the study. In this way, we limit the work required 
for the preparation of the ground-truth brain masks, while using templates as similar 
as possible to the subjects in the study.


Registration
------------

We have chosen a recently developed publicly available registration method
DRAMMS because of its ability to meet two major challenges specific
to registering raw brain MR images. The first major challenge is the large
amount of intensity inhomogeneity and background noise in raw brain MR
images. DRAMMS finds voxel-wise correspondences by looking at multi-scale
and multi-orientation Gabor texture features around each voxel. Therefore,
it is relatively robust to inhomogeneity and noise. The second major challenge 
in registering brain MR images with skull is the possible presence of
outlier regions. Outlier regions, or missing correspondences, usually refer to
regions that exist in one image but not in the other. For instance, the MR
image of one subject may contain more neck regions, or may have part of
superior skull missing due to different field-of-view (FOV) during MRI acquisition. 
DRAMMS meets this challenge using the mutual salience weighting,
as it adaptively finds and relies on voxels/regions that are more likely to
establish reliable correspondences across images. This way, it reduces the
negative impact of outlier regions compared to other registration methods
that forces matching for all voxels/regions.

Label Fusion
------------

We adopt a spatially adaptive fusion strategy that takes into consideration 
the local similarities between the templates and the target image. At
each voxel, a weight is assigned to each template such that a higher confidence 
is given to templates that are locally more similar, e.g. more easily
mapped, to the target image. Our main premise here is that the Jacobian
maps are good indicators of local similarities between source and target images. 
Large Jacobian values often correlate with large geometric differences
between template and target images. Itâ€™s preferable to assign high weights
to labels from masks that are locally similar to the subject image, as we
have more confidence on the registration when the source and target images
are more similar. Such a weighting mechanism is also efficient for making
the method more robust. If the registration of one (or a few in the extreme
case) template completely fails, the corresponding Jacobian map will have
extreme values in most voxels. Thus the brain mask from this template will
be ranked very low in general, and the template will not have any effect on
the final extraction/segmentation.

